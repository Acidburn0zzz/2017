<doctype html>
<html lang='en'>
<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1' />
	<title>Ind.ie Labs - Blog - Expand and collapse accessibility on the Ind.ie manifesto</title>
	<!--[if lte IE 8]>
        <script src='https://ind.ie/assets/js/html5shiv.js'></script>
    <![endif]-->
    <link rel='shortcut icon' href='/favicon.ico'>
    <link rel='apple-touch-icon' href='https://ind.ie/assets/images/ios-180.png'>
    <link rel='apple-touch-icon' sizes='76x76' href='https://ind.ie/assets/images/ios-76.png'>
    <link rel='apple-touch-icon' sizes='120x120' href='https://ind.ie/assets/images/ios-120.png'>
    <link rel='apple-touch-icon' sizes='152x152' href='https://ind.ie/assets/images/ios-152.png'>
    <link rel='apple-touch-icon' sizes='152x152' href='https://ind.ie/assets/images/ios-180.png'>
	<link rel='alternate' type='application/rss+xml' title='Ind.ie Labs Blog' href='https://ind.ie/labs/blog/rss/index.xml' />
	<link rel='stylesheet' href='https://ind.ie/assets/css/lab-styles.css'/>
	<link rel="stylesheet" href="../css/highlight/kimbie.dark.css">
	<link rel='stylesheet' href='../css/styles.css'/>
	<script src="../js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
</head>
<body class='labs labs-blog'>
	<!-- @import '../../../../assets/includes/_nav.kit' -->
	<div class='main h-entry'>
        <!-- @import '../../../../includes/_archive-notice.kit' -->
		<h1 class='p-name long-title'>Expand and collapse accessibility on the Ind.ie manifesto</h1>
		<p class='post-date dt-published' datetime='2015-02-16 17:00:00'>16th February, 2015 — <span class='p-author'>Laura Kalbag</span></p>
		<div class='e-content'>

		<p class='tldr'><strong>TL; DR:</strong> Using WAI-ARIA <code>aria-controls</code>, <code>aria-expanded</code> and <code>aria-hidden</code> attributes can make expanding and collapsing content more accessible.</p>

		<p>We’re always trying to iterate and improve the accessibility on the Ind.ie site. I’ve recently been updating my knowledge on <a href='https://dev.opera.com/articles/introduction-to-wai-aria/'>WAI-ARIA</a>, and I realised I could improve the experience for keyboard navigation and screen reader users on the <a href='https://ind.ie/about/manifesto/'>Ind.ie manifesto</a>.</p>

		<p>Expanding and collapsing content boxes are a very common space-saver on modern sites. Usually you’d select the heading of the box to expand and collapse the text underneath. Great if you’re equipped with a mouse and can see what you’re doing. If not, the hidden text will remain hidden away forever.</p>

		<p>On the manifesto page, we hide and show longer descriptions of terminology used in the manifesto. Previously we used <code>&lt;dfn&gt;</code> definition tags to mark up the initial text, and <code>&lt;div&gt;</code> to mark up the description. We used the <code>data-definition-text-id='definition-corporate-surveillance'</code> <a href='http://ejohn.org/blog/html-5-data-attributes/'>custom data attribute</a> on the <code>&lt;dfn&gt;</code> to programmatically connect the text and description. The key word being <em>*programmatically*</em>. Whilst the custom data attribute gave us a semantic hook for the JavaScript, it meant nothing to someone reading the text with a screen reader, and/or using keyboard navigation.</p>

		<h2>Improvement needed</h2>

		<p>In order to improve the accessibility of the page, I needed to cover a few areas:</p>

		<h3>Progressively enhance the definitions and descriptions so they’re easy to use without JavaScript</h3>

		<p>We’re fans of progressive enhancement here, and accessibility begins with being able to use the page if JavaScript hasn’t loaded. With such simple content, there are no excuses.</p>

		<p>Without the JavaScript expanding and collapsing the content, there’s not many ways to show that the definition and description are connected. I decided that the most meaningful way to do it was through an internal link which linked the definition to the description. Following on from my <a href='http://laurakalbag.com/skip-links/'>blog post on skip links a few weeks ago</a>, I knew that I needed to use <code>tabindex='-1'</code> to make the skip link content accessible to keyboard navigation and screen readers.</p>

		<pre>HTML for basic definitions
<code>&lt;dfn data-definition-text-id=&#39;definition-corporate-surveillance&#39;&gt;
	&lt;a class=&#39;definition-link&#39; href=&#39;#definition-corporate-surveillance&#39;&gt;corporate surveillance&lt;/a&gt;
&lt;/dfn&gt;</code></pre>

		<pre>HTML for basic descriptions
<code>&lt;div class=&#39;full-text definition-expanded&#39; id=&#39;definition-corporate-surveillance&#39; tabindex=&#39;-1&#39;&gt;
	&lt;p&gt;Corporate surveillance treats[…]&lt;/p&gt;
&lt;/div&gt;</code></pre>

		<h3>Turn the definition links into buttons</h3>
		<p>When the <a href='https://source.ind.ie/project/ind-ie-site/blob/master/source/assets/js/manifesto.js'>JavaScript to expand and collapse the content</a> gets added, the link becomes an element that triggers an event. The very definition of a <code>&lt;button&gt;</code>. So my JavaScript first turns the definition and its internal link into a button. This gives us all the accessibility behaviour associated with a button, like being able to use the <kbd>enter</kbd> key for interaction.</p>

		<h3>Connect the definitions to the descriptive text in a way that’s meaningful to screen readers</h3>

		<p>I learned about the <code>aria-controls</code> attribute from <a href='http://heydonworks.com/practical_aria_examples/#progressive-collapsibles'>Heydon Pickering’s fantastic blog post on Practical ARIA examples</a>. The attribute helps describe how one element controls another. Teamed with the <code>aria-expanded</code> attribute on the definition, I could describe whether the description was expanded or collapsed. VoiceOver on Safari reads the definition as “corporate surveillance, collapsed, button.”</p>

		<p>Add the <code>aria-hidden</code> attribute on to the description, and rather than just hiding the content using the latest CSS hack, the markup can tell assistive technology that it’s hidden.</p>

		<pre>Definition text HTML after JS has loaded
<code>&lt;button data-definition-text-id=&quot;definition-corporate-surveillance&quot; class=&quot;definition-link&quot; aria-expanded=&quot;true&quot; aria-controls=&quot;definition-corporate-surveillance&quot;&gt;corporate surveillance&lt;/button&gt;</code></pre>

		<p>Heydon’s post has <a href='http://heydonworks.com/practical_aria_examples/js/a11y.js'>a nifty jQuery example for implementing the JavaScript for accessible expanding and collapsing content</a>, however, as we’re using vanilla JavaScript on the Ind.ie site, I had to write it myself.</p>

		<h3>Toggle the expanding and collapsing of the content</h3>
		<p>Once I knew the HTML was going to be as accessible as possible, I could then use JavaScript to toggle the visibility of the content using CSS. You can <a href='https://source.ind.ie/project/ind-ie-site/blob/master/source/assets/js/manifesto.js'>see the script in its entirety on the Ind.ie Source repository</a>. Be kind, I’m still getting my head around JS!</p>

		<h2>Not too tricky</h2>
		<p>The hardest part for me was writing the JavaScript, as I’m still learning. Hopefully you can see from this post that just a little more love and attention to the HTML, and your expanding and collapsing content can be a lot more accessible.</p>
		</div>
		<div id="discourse-comments"></div>

		<footer class="site-footer">
                <h2 class="site-name"><a href="https://ind.ie">ind.ie</a></h2>
                <small class="copyright"><abbr title="Copyright">©</abbr> <a href="/about/#trademarks">Article 12</a>. All content is <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International</a>, unless otherwise stated.</small>
                <div class="view-source-wrap">
                    <a class="view-source" href="https://source.ind.ie/project/ind-ie-site/tree/master">View source</a>
                </div>
            </footer>
	</div>
    <script type='text/javascript'>
      var discourseUrl = 'https://forum.ind.ie/',
          discourseEmbedUrl = 'https://ind.ie/labs/blog/expand-collapse-accessibility/';

      (function() {
        var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
          d.src = discourseUrl + 'javascripts/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
            })();
    </script>
</body>
</html>